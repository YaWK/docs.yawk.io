<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>YaWK: YAWK\db Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<!-- ... other metadata & script includes ... -->
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript">
DoxygenAwesomeDarkModeToggle.init()
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="new_stylesheet.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Abel&family=Roboto+Serif:wght@300&display=swap" rel="stylesheet">
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">YaWK
   &#160;<span id="projectnumber">23.3</span>
   </div>
   <div id="projectbrief">Yet another WebKit</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classYAWK_1_1db.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classYAWK_1_1db-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">YAWK\db Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Mysqli database class; returns db connection object.  
 <a href="classYAWK_1_1db.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a58efd4df7f121b33a5b4c5a1189fe83f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classYAWK_1_1db.html#a58efd4df7f121b33a5b4c5a1189fe83f">__construct</a> ()</td></tr>
<tr class="separator:a58efd4df7f121b33a5b4c5a1189fe83f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a616c7ade455f09767fc38d4c1e4eeaf4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classYAWK_1_1db.html#a616c7ade455f09767fc38d4c1e4eeaf4">beginTransaction</a> ()</td></tr>
<tr class="separator:a616c7ade455f09767fc38d4c1e4eeaf4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad61c9d7d7a25a8c141796017521d5eaa"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classYAWK_1_1db.html#ad61c9d7d7a25a8c141796017521d5eaa">clearResults</a> ()</td></tr>
<tr class="separator:ad61c9d7d7a25a8c141796017521d5eaa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa494743524a6fe38b7ef48e47e17e674"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classYAWK_1_1db.html#aa494743524a6fe38b7ef48e47e17e674">close</a> ()</td></tr>
<tr class="separator:aa494743524a6fe38b7ef48e47e17e674"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a331e0309e6081e15a6dbcfa2e7070ad4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classYAWK_1_1db.html#a331e0309e6081e15a6dbcfa2e7070ad4">commit</a> ()</td></tr>
<tr class="separator:a331e0309e6081e15a6dbcfa2e7070ad4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6212830d7c131c98e79ad93aee0317c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classYAWK_1_1db.html#ac6212830d7c131c98e79ad93aee0317c">connect</a> ()</td></tr>
<tr class="memdesc:ac6212830d7c131c98e79ad93aee0317c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Connect to the database.  <a href="classYAWK_1_1db.html#ac6212830d7c131c98e79ad93aee0317c">More...</a><br /></td></tr>
<tr class="separator:ac6212830d7c131c98e79ad93aee0317c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81390a543759f3ee611183447b9fc15b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classYAWK_1_1db.html#a81390a543759f3ee611183447b9fc15b">deleteDatabase</a> ($database)</td></tr>
<tr class="memdesc:a81390a543759f3ee611183447b9fc15b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete a whole database (including all tables)  <a href="classYAWK_1_1db.html#a81390a543759f3ee611183447b9fc15b">More...</a><br /></td></tr>
<tr class="separator:a81390a543759f3ee611183447b9fc15b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36d0a051a5628525feb73d549182c283"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classYAWK_1_1db.html#a36d0a051a5628525feb73d549182c283">dropTables</a> ($tables)</td></tr>
<tr class="memdesc:a36d0a051a5628525feb73d549182c283"><td class="mdescLeft">&#160;</td><td class="mdescRight">Drop table from a database.  <a href="classYAWK_1_1db.html#a36d0a051a5628525feb73d549182c283">More...</a><br /></td></tr>
<tr class="separator:a36d0a051a5628525feb73d549182c283"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab513749ed33ceaf9bf4183fc15d3745d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classYAWK_1_1db.html#ab513749ed33ceaf9bf4183fc15d3745d">error</a> ()</td></tr>
<tr class="memdesc:ab513749ed33ceaf9bf4183fc15d3745d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetch last error from the database.  <a href="classYAWK_1_1db.html#ab513749ed33ceaf9bf4183fc15d3745d">More...</a><br /></td></tr>
<tr class="separator:ab513749ed33ceaf9bf4183fc15d3745d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d564cf3cea5ea5aaa659e3131a6ea6a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classYAWK_1_1db.html#a0d564cf3cea5ea5aaa659e3131a6ea6a">get_tables</a> ()</td></tr>
<tr class="memdesc:a0d564cf3cea5ea5aaa659e3131a6ea6a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get all tables from a database and return as array.  <a href="classYAWK_1_1db.html#a0d564cf3cea5ea5aaa659e3131a6ea6a">More...</a><br /></td></tr>
<tr class="separator:a0d564cf3cea5ea5aaa659e3131a6ea6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42a5e757f442d6051426ea346340c78d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classYAWK_1_1db.html#a42a5e757f442d6051426ea346340c78d">import</a> ($sqlfile, $lang)</td></tr>
<tr class="memdesc:a42a5e757f442d6051426ea346340c78d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Import data from .sql file into database.  <a href="classYAWK_1_1db.html#a42a5e757f442d6051426ea346340c78d">More...</a><br /></td></tr>
<tr class="separator:a42a5e757f442d6051426ea346340c78d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4719bb30485733c458b525205cc4f25"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classYAWK_1_1db.html#ad4719bb30485733c458b525205cc4f25">more_results</a> ()</td></tr>
<tr class="memdesc:ad4719bb30485733c458b525205cc4f25"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if there are more query results from a multi query.  <a href="classYAWK_1_1db.html#ad4719bb30485733c458b525205cc4f25">More...</a><br /></td></tr>
<tr class="separator:ad4719bb30485733c458b525205cc4f25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8495f225c8db2fd1dd589d8193150c01"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classYAWK_1_1db.html#a8495f225c8db2fd1dd589d8193150c01">multi_query</a> ($<a class="el" href="classYAWK_1_1db.html#a81da81280a387018e6f363f447c77a06">query</a>)</td></tr>
<tr class="separator:a8495f225c8db2fd1dd589d8193150c01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d0c04ecbe11a9f8e70830bd63ffcde9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classYAWK_1_1db.html#a7d0c04ecbe11a9f8e70830bd63ffcde9">next_result</a> ()</td></tr>
<tr class="memdesc:a7d0c04ecbe11a9f8e70830bd63ffcde9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move to next result set of a multi query.  <a href="classYAWK_1_1db.html#a7d0c04ecbe11a9f8e70830bd63ffcde9">More...</a><br /></td></tr>
<tr class="separator:a7d0c04ecbe11a9f8e70830bd63ffcde9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44121121304f4bdb1769dfcf342c57c8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classYAWK_1_1db.html#a44121121304f4bdb1769dfcf342c57c8">prepare</a> ($sql)</td></tr>
<tr class="separator:a44121121304f4bdb1769dfcf342c57c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81da81280a387018e6f363f447c77a06"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classYAWK_1_1db.html#a81da81280a387018e6f363f447c77a06">query</a> ($query)</td></tr>
<tr class="memdesc:a81da81280a387018e6f363f447c77a06"><td class="mdescLeft">&#160;</td><td class="mdescRight">Execute any sql query.  <a href="classYAWK_1_1db.html#a81da81280a387018e6f363f447c77a06">More...</a><br /></td></tr>
<tr class="separator:a81da81280a387018e6f363f447c77a06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31489238ce266c2bca7b84da887e6b64"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classYAWK_1_1db.html#a31489238ce266c2bca7b84da887e6b64">quote</a> ($value)</td></tr>
<tr class="memdesc:a31489238ce266c2bca7b84da887e6b64"><td class="mdescLeft">&#160;</td><td class="mdescRight">Quote and escape value for use in a database query *.  <a href="classYAWK_1_1db.html#a31489238ce266c2bca7b84da887e6b64">More...</a><br /></td></tr>
<tr class="separator:a31489238ce266c2bca7b84da887e6b64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87394c8164b454fe4ac80fad73f19a91"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classYAWK_1_1db.html#a87394c8164b454fe4ac80fad73f19a91">real_escape_string</a> ($migrationSql)</td></tr>
<tr class="separator:a87394c8164b454fe4ac80fad73f19a91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48011790184b9e7302ac84cb246cb2b1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classYAWK_1_1db.html#a48011790184b9e7302ac84cb246cb2b1">rollback</a> ()</td></tr>
<tr class="separator:a48011790184b9e7302ac84cb246cb2b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8aa3eaeef683b50d4f40b8ff7a8b0e06"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classYAWK_1_1db.html#a8aa3eaeef683b50d4f40b8ff7a8b0e06">select</a> ($<a class="el" href="classYAWK_1_1db.html#a81da81280a387018e6f363f447c77a06">query</a>)</td></tr>
<tr class="memdesc:a8aa3eaeef683b50d4f40b8ff7a8b0e06"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetch rows from database (SELECT query)  <a href="classYAWK_1_1db.html#a8aa3eaeef683b50d4f40b8ff7a8b0e06">More...</a><br /></td></tr>
<tr class="separator:a8aa3eaeef683b50d4f40b8ff7a8b0e06"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:af20b762cbadb27a59e28b5175372afa4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classYAWK_1_1db.html#af20b762cbadb27a59e28b5175372afa4">$config</a></td></tr>
<tr class="separator:af20b762cbadb27a59e28b5175372afa4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87e18404efd7485d2dc21a1f0092fc8c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classYAWK_1_1db.html#a87e18404efd7485d2dc21a1f0092fc8c">$connection</a></td></tr>
<tr class="separator:a87e18404efd7485d2dc21a1f0092fc8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Mysqli database class; returns db connection object. </p>
<p><b>Database class - connect to mysqli and return connection object</b> </p>
<p>This class establish the database connection if none already exists. It serves some handy methods as well, like quote data, get and delete tables, import .sql files, as well as typical select and query methods. </p>
<dl class="section author"><dt>Author</dt><dd>Daniel Retzl <a href="#" onclick="location.href='mai'+'lto:'+'dan'+'ie'+'lre'+'tz'+'l@g'+'ma'+'il.'+'co'+'m'; return false;">danie<span style="display: none;">.nosp@m.</span>lret<span style="display: none;">.nosp@m.</span>zl@gm<span style="display: none;">.nosp@m.</span>ail.<span style="display: none;">.nosp@m.</span>com</a> </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>2012-2018 Daniel Retzl yawk.io @license <a href="https://opensource.org/licenses/MIT">https://opensource.org/licenses/MIT</a> </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.0.0 </dd></dl>

<p class="definition">Definition at line <a class="el" href="db_8php_source.html#l00016">16</a> of file <a class="el" href="db_8php_source.html">db.php</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a58efd4df7f121b33a5b4c5a1189fe83f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58efd4df7f121b33a5b4c5a1189fe83f">&#9670;&nbsp;</a></span>__construct()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">YAWK\db::__construct </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>db constructor - Include the database config file </p>

<p class="definition">Definition at line <a class="el" href="db_8php_source.html#l00026">26</a> of file <a class="el" href="db_8php_source.html">db.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;        {   <span class="comment">// include config array</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;            require_once (<span class="stringliteral">&quot;dbconfig.php&quot;</span>);</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a616c7ade455f09767fc38d4c1e4eeaf4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a616c7ade455f09767fc38d4c1e4eeaf4">&#9670;&nbsp;</a></span>beginTransaction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">YAWK\db::beginTransaction </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">Exception</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="db_8php_source.html#l00074">74</a> of file <a class="el" href="db_8php_source.html">db.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;                                          : <span class="keywordtype">void</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        {</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;            $this-&gt;connection-&gt;begin_transaction();</div>
</div><!-- fragment -->
</div>
</div>
<a id="ad61c9d7d7a25a8c141796017521d5eaa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad61c9d7d7a25a8c141796017521d5eaa">&#9670;&nbsp;</a></span>clearResults()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">YAWK\db::clearResults </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Clear all pending result sets after a multi-query </p><dl class="section return"><dt>Returns</dt><dd>bool true if successful, false otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="db_8php_source.html#l00171">171</a> of file <a class="el" href="db_8php_source.html">db.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        {</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;            <span class="keywordflow">try</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            {</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                <span class="comment">// Check if there are more result sets available</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                <span class="keywordflow">while</span> ($this-&gt;connection-&gt;more_results() &amp;&amp; $this-&gt;connection-&gt;next_result())</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                {</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                    <span class="comment">// Store the current result set</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                    <a class="code" href="email-send_8php.html#a112ef069ddc0454086e3d1e6d8d55d07">$result</a> = $this-&gt;connection-&gt;store_result();</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160; </div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                    <span class="comment">// Free the current result set</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="email-send_8php.html#a112ef069ddc0454086e3d1e6d8d55d07">$result</a> !== <span class="keyword">false</span>)</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                    {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                        <a class="code" href="email-send_8php.html#a112ef069ddc0454086e3d1e6d8d55d07">$result</a>-&gt;free();</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                    }</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                }</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160; </div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            }</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;            <span class="keywordflow">catch</span> (\Exception $e)</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;            {</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                error_log(<span class="stringliteral">&quot;Error clearing result sets: &quot;</span> . $e-&gt;getMessage());</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;            }</div>
<div class="ttc" id="aemail-send_8php_html_a112ef069ddc0454086e3d1e6d8d55d07"><div class="ttname"><a href="email-send_8php.html#a112ef069ddc0454086e3d1e6d8d55d07">$result</a></div><div class="ttdeci">$result</div><div class="ttdef"><b>Definition:</b> <a href="email-send_8php_source.html#l00137">email-send.php:137</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="email-send_8php_source.html#l00137">$result</a>.</p>

</div>
</div>
<a id="aa494743524a6fe38b7ef48e47e17e674"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa494743524a6fe38b7ef48e47e17e674">&#9670;&nbsp;</a></span>close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">YAWK\db::close </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="db_8php_source.html#l00066">66</a> of file <a class="el" href="db_8php_source.html">db.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;                               : <span class="keywordtype">void</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        {</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;            $this-&gt;connection-&gt;close();</div>
</div><!-- fragment -->
</div>
</div>
<a id="a331e0309e6081e15a6dbcfa2e7070ad4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a331e0309e6081e15a6dbcfa2e7070ad4">&#9670;&nbsp;</a></span>commit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">YAWK\db::commit </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="db_8php_source.html#l00089">89</a> of file <a class="el" href="db_8php_source.html">db.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;                                : <span class="keywordtype">void</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        {   <span class="comment">// commit transaction</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;            $this-&gt;connection-&gt;commit();</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac6212830d7c131c98e79ad93aee0317c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6212830d7c131c98e79ad93aee0317c">&#9670;&nbsp;</a></span>connect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">YAWK\db::connect </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Connect to the database. </p>
<dl class="section return"><dt>Returns</dt><dd>object|bool false on failure / mysqli MySQLi object instance on success </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">Exception</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="db_8php_source.html#l00036">36</a> of file <a class="el" href="db_8php_source.html">db.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;                                 : <span class="keywordtype">object</span>|<span class="keywordtype">bool</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;        {</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;            <span class="comment">// if connection is not set</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;            <span class="keywordflow">if</span> (!isset($this-&gt;connection))</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;            {</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;                <span class="keywordflow">try</span> {</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;                    <span class="comment">// create new database object</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;                    $this-&gt;connection = new \mysqli(</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;                        $this-&gt;<a class="code" href="dbconfig_8php.html#aa79aa63cc5239994bcc7c408a9774d1d">config</a>[<span class="stringliteral">&#39;server&#39;</span>],</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;                        $this-&gt;<a class="code" href="dbconfig_8php.html#aa79aa63cc5239994bcc7c408a9774d1d">config</a>[<span class="stringliteral">&#39;username&#39;</span>],</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;                        $this-&gt;<a class="code" href="dbconfig_8php.html#aa79aa63cc5239994bcc7c408a9774d1d">config</a>[<span class="stringliteral">&#39;password&#39;</span>],</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;                        $this-&gt;<a class="code" href="dbconfig_8php.html#aa79aa63cc5239994bcc7c408a9774d1d">config</a>[<span class="stringliteral">&#39;dbname&#39;</span>],</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;                        $this-&gt;<a class="code" href="dbconfig_8php.html#aa79aa63cc5239994bcc7c408a9774d1d">config</a>[<span class="stringliteral">&#39;port&#39;</span>]</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;                    );</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;                    <span class="comment">// connection established successfully</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="classYAWK_1_1db.html#a87e18404efd7485d2dc21a1f0092fc8c">$this-&gt;connection</a>;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;                } <span class="keywordflow">catch</span> (\mysqli_sql_exception $e) {</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;                    <span class="comment">// failed to connect to database (wrong credentials?)</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;                    <span class="keywordflow">throw</span> <span class="keyword">new</span> Exception(<span class="stringliteral">&#39;Failed to connect to database: &#39;</span> . $e-&gt;getMessage());</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;                } <span class="keywordflow">catch</span> (Exception $e) {</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;                    <span class="keywordflow">throw</span> <span class="keyword">new</span> Exception(<span class="stringliteral">&#39;Database connection error: &#39;</span> . $e-&gt;getMessage());</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;                }</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;            }</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;            {</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;                <span class="comment">// connection already established...</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="classYAWK_1_1db.html#a87e18404efd7485d2dc21a1f0092fc8c">$this-&gt;connection</a>;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;            }</div>
<div class="ttc" id="aclassYAWK_1_1db_html_a87e18404efd7485d2dc21a1f0092fc8c"><div class="ttname"><a href="classYAWK_1_1db.html#a87e18404efd7485d2dc21a1f0092fc8c">YAWK\db\$connection</a></div><div class="ttdeci">$connection</div><div class="ttdef"><b>Definition:</b> <a href="db_8php_source.html#l00021">db.php:21</a></div></div>
<div class="ttc" id="adbconfig_8php_html_aa79aa63cc5239994bcc7c408a9774d1d"><div class="ttname"><a href="dbconfig_8php.html#aa79aa63cc5239994bcc7c408a9774d1d">config</a></div><div class="ttdeci">$this config['server']</div><div class="ttdef"><b>Definition:</b> <a href="dbconfig_8php_source.html#l00003">dbconfig.php:3</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="db_8php_source.html#l00021">YAWK\db\$connection</a>, and <a class="el" href="dbconfig_8php_source.html#l00003">config</a>.</p>

<p class="reference">Referenced by <a class="el" href="db_8php_source.html#l00265">YAWK\db\error()</a>, <a class="el" href="db_8php_source.html#l00205">YAWK\db\query()</a>, and <a class="el" href="db_8php_source.html#l00278">YAWK\db\quote()</a>.</p>

</div>
</div>
<a id="a81390a543759f3ee611183447b9fc15b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81390a543759f3ee611183447b9fc15b">&#9670;&nbsp;</a></span>deleteDatabase()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">YAWK\db::deleteDatabase </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$database</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete a whole database (including all tables) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$database</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="db_8php_source.html#l00367">367</a> of file <a class="el" href="db_8php_source.html">db.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                                                 : <span class="keywordtype">bool</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        {</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;            $deletedTables = 0;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;            $errors = 0;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160; </div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;            <span class="comment">// get all tables as array</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;            <a class="code" href="email-send_8php.html#a112ef069ddc0454086e3d1e6d8d55d07">$result</a> = $this-&gt;<a class="code" href="classYAWK_1_1db.html#a81da81280a387018e6f363f447c77a06">query</a>(<span class="stringliteral">&quot;SHOW TABLES IN `$database`&quot;</span>);</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;            <span class="comment">// check if result is set</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160; </div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;            <span class="keywordflow">if</span> (isset(<a class="code" href="email-send_8php.html#a112ef069ddc0454086e3d1e6d8d55d07">$result</a>) &amp;&amp; (!empty(<a class="code" href="email-send_8php.html#a112ef069ddc0454086e3d1e6d8d55d07">$result</a>)))</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;            {</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                <span class="comment">// walk through result array</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                <span class="keywordflow">while</span> ($table = mysqli_fetch_array(<a class="code" href="email-send_8php.html#a112ef069ddc0454086e3d1e6d8d55d07">$result</a>))</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                {   <span class="comment">// store tablename in var</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                    $tableName = $table[0];</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;                    <span class="comment">// try to delete table</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                    <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="classYAWK_1_1db.html#a81da81280a387018e6f363f447c77a06">query</a>(<span class="stringliteral">&quot;DROP TABLE `$database`.`$tableName`&quot;</span>))</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                    {   <span class="comment">// output(?)</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;                        <span class="comment">//echo &quot;$tableName was cleared &lt;br&gt;&quot;;</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;                        $deletedTables++;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;                    }</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                    {   <span class="comment">// output error</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                        $errors++;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                    }</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                }</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;            }</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;            <span class="comment">// something went wrong</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;            <span class="keywordflow">if</span> ($errors &gt; 0)</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;            {   <span class="comment">// output error</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;            }</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;            <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;            }</div>
<div class="ttc" id="aclassYAWK_1_1db_html_a81da81280a387018e6f363f447c77a06"><div class="ttname"><a href="classYAWK_1_1db.html#a81da81280a387018e6f363f447c77a06">YAWK\db\query</a></div><div class="ttdeci">query($query)</div><div class="ttdoc">Execute any sql query.</div><div class="ttdef"><b>Definition:</b> <a href="db_8php_source.html#l00205">db.php:205</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a36d0a051a5628525feb73d549182c283"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36d0a051a5628525feb73d549182c283">&#9670;&nbsp;</a></span>dropTables()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">YAWK\db::dropTables </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$tables</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Drop table from a database. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$tables</td><td>the tables to drop </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool </dd></dl>

<p class="definition">Definition at line <a class="el" href="db_8php_source.html#l00427">427</a> of file <a class="el" href="db_8php_source.html">db.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        {</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;            $processed = 0;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;            <span class="comment">// check if table was set</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;            <span class="keywordflow">if</span> (!isset($tables) || (empty($tables)) || (!array($tables)))</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;            {</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;            }</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;            <span class="keywordflow">foreach</span> ($tables as $table)</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;            {</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="classYAWK_1_1db.html#a81da81280a387018e6f363f447c77a06">query</a>(<span class="stringliteral">&quot;DROP TABLE `&quot;</span>.$table.<span class="stringliteral">&quot;`&quot;</span>) === <span class="keyword">true</span>)</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                {</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                    $processed++;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                }</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;            }</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
</div><!-- fragment -->
</div>
</div>
<a id="ab513749ed33ceaf9bf4183fc15d3745d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab513749ed33ceaf9bf4183fc15d3745d">&#9670;&nbsp;</a></span>error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">YAWK\db::error </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fetch last error from the database. </p>
<dl class="section return"><dt>Returns</dt><dd>string database error </dd></dl>

<p class="definition">Definition at line <a class="el" href="db_8php_source.html#l00265">265</a> of file <a class="el" href="db_8php_source.html">db.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        {</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;            <span class="comment">// connect to database</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            $this-&gt;connection = $this-&gt;<a class="code" href="classYAWK_1_1db.html#ac6212830d7c131c98e79ad93aee0317c">connect</a>();</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;            <span class="comment">// return latest error</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            <span class="keywordflow">return</span> $this-&gt;connection-&gt;error;</div>
<div class="ttc" id="aclassYAWK_1_1db_html_ac6212830d7c131c98e79ad93aee0317c"><div class="ttname"><a href="classYAWK_1_1db.html#ac6212830d7c131c98e79ad93aee0317c">YAWK\db\connect</a></div><div class="ttdeci">connect()</div><div class="ttdoc">Connect to the database.</div><div class="ttdef"><b>Definition:</b> <a href="db_8php_source.html#l00036">db.php:36</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="db_8php_source.html#l00036">YAWK\db\connect()</a>.</p>

</div>
</div>
<a id="a0d564cf3cea5ea5aaa659e3131a6ea6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d564cf3cea5ea5aaa659e3131a6ea6a">&#9670;&nbsp;</a></span>get_tables()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">YAWK\db::get_tables </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get all tables from a database and return as array. </p>
<dl class="section return"><dt>Returns</dt><dd>array tableList </dd></dl>

<p class="definition">Definition at line <a class="el" href="db_8php_source.html#l00408">408</a> of file <a class="el" href="db_8php_source.html">db.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        {</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;            <span class="comment">// set tableList array</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;            $tableList = array();</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;            <span class="comment">// get tables from database</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;            <a class="code" href="settings-assets_8php.html#a49a8a4009b02e49717caa88b128affc5">$res</a> = $this-&gt;<a class="code" href="classYAWK_1_1db.html#a81da81280a387018e6f363f447c77a06">query</a>(<span class="stringliteral">&quot;SHOW TABLES&quot;</span>);</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;            <span class="comment">// walk through result</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;            <span class="keywordflow">while</span>($row = mysqli_fetch_array(<a class="code" href="settings-assets_8php.html#a49a8a4009b02e49717caa88b128affc5">$res</a>))</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;            {   <span class="comment">// fill array</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                $tableList[] = $row[0];</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;            }</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;            <span class="keywordflow">return</span> $tableList;</div>
<div class="ttc" id="asettings-assets_8php_html_a49a8a4009b02e49717caa88b128affc5"><div class="ttname"><a href="settings-assets_8php.html#a49a8a4009b02e49717caa88b128affc5">$res</a></div><div class="ttdeci">$res</div><div class="ttdef"><b>Definition:</b> <a href="settings-assets_8php_source.html#l00149">settings-assets.php:149</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a42a5e757f442d6051426ea346340c78d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42a5e757f442d6051426ea346340c78d">&#9670;&nbsp;</a></span>import()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">YAWK\db::import </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$sqlfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$lang</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Import data from .sql file into database. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$sqlfile</td><td></td></tr>
    <tr><td class="paramname">$lang</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool </dd></dl>

<p class="definition">Definition at line <a class="el" href="db_8php_source.html#l00292">292</a> of file <a class="el" href="db_8php_source.html">db.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        {</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;            <span class="comment">// http://stackoverflow.com/questions/19751354/how-to-import-sql-file-in-mysql-database-using-php</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;            <span class="keywordflow">if</span> (!isset($sqlfile) || (empty($sqlfile)))</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            {</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                <a class="code" href="actions_8php.html#a0722441477f957078ee2437054556cbc">$filename</a> = <span class="stringliteral">&#39;yawk_database.sql&#39;</span>;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;            }</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                {</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                    <a class="code" href="actions_8php.html#a0722441477f957078ee2437054556cbc">$filename</a> = $sqlfile;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                }</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;            <span class="comment">// filename</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;            <span class="comment">// $maxRuntime = 8; // less then your max script execution limit</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;            <span class="comment">// $maxRuntime = 8; // less then your max script execution limit</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160; </div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            <span class="comment">// $deadline = time()+$maxRuntime;</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;            $progressFilename = <a class="code" href="actions_8php.html#a0722441477f957078ee2437054556cbc">$filename</a>.<span class="stringliteral">&#39;_filepointer&#39;</span>; <span class="comment">// tmp file for progress</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;            $errorFilename = <a class="code" href="actions_8php.html#a0722441477f957078ee2437054556cbc">$filename</a>.<span class="stringliteral">&#39;_error&#39;</span>; <span class="comment">// tmp file for erro</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160; </div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;            ($fp = fopen(<a class="code" href="actions_8php.html#a0722441477f957078ee2437054556cbc">$filename</a>, <span class="charliteral">&#39;r&#39;</span>)) OR <a class="code" href="block-user_8php.html#aa0f42d43ba3cb9e178b944ee55e73a7c">die</a>(<span class="stringliteral">&#39;failed to open file:&#39;</span>.<a class="code" href="actions_8php.html#a0722441477f957078ee2437054556cbc">$filename</a>);</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160; </div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;            <span class="comment">// check for previous error</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;            <span class="keywordflow">if</span>(file_exists($errorFilename) )</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;            {</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;               <span class="comment">// die(&#39;&lt;pre&gt; previous error: &#39;.file_get_contents($errorFilename));</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;            }</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160; </div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;            <span class="comment">// go to previous file position</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;            $filePosition = 0;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;            <span class="keywordflow">if</span>(file_exists($progressFilename))</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            {</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                $filePosition = file_get_contents($progressFilename);</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                fseek($fp, $filePosition);</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;            }</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160; </div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;            $queryCount = 0;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;            $query = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;            <span class="keywordflow">while</span>($line=fgets($fp, 1024000))</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;            {</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                <span class="keywordflow">if</span>(substr($line,0,2)==<span class="stringliteral">&#39;--&#39;</span> OR trim($line)==<span class="stringliteral">&#39;&#39;</span> )</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                {</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                }</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160; </div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                $query .= $line;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                <span class="keywordflow">if</span>( substr(trim($query),-1)==<span class="charliteral">&#39;;&#39;</span> )</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                {</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                    <span class="keywordflow">if</span>(!$this-&gt;<a class="code" href="classYAWK_1_1db.html#a81da81280a387018e6f363f447c77a06">query</a>($query))</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                    {   <span class="comment">// error handling</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                       <a class="code" href="webmail-compose_8php.html#aeba2ab722cedda53dbb7ec1a59f45550">$error</a> = <span class="stringliteral">&#39;Error performing query \&#39;&lt;strong&gt;&#39;</span> . $query . <span class="charliteral">&#39;\&#39;</span>: <span class="stringliteral">&#39; . @mysqli_error($this);</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="stringliteral">                       @file_put_contents($errorFilename, $error.&quot;\n&quot;);</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="stringliteral">                       //exit;</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="stringliteral">                    }</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="stringliteral">                    $query = &#39;</span><span class="stringliteral">&#39;;</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="stringliteral">                    @file_put_contents($progressFilename, ftell($fp)); // save the current file position for</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="stringliteral">                    $queryCount++;</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="stringliteral">                }</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="stringliteral">            }</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="stringliteral">            if(feof($fp))</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="stringliteral">            {</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="stringliteral">                return true;</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="stringliteral">            }</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="stringliteral">            else</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="stringliteral">                {</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="stringliteral">                    // $status .= ftell($fp).&#39;</span>/<span class="stringliteral">&#39;.filesize($filename).&#39;</span> <span class="stringliteral">&#39;.(round(ftell($fp)/filesize($filename), 2)*100).&#39;</span>%<span class="stringliteral">&#39;.&quot;\n&quot;;</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="stringliteral">                    return false;</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="stringliteral">                }</span></div>
<div class="ttc" id="aactions_8php_html_a0722441477f957078ee2437054556cbc"><div class="ttname"><a href="actions_8php.html#a0722441477f957078ee2437054556cbc">$filename</a></div><div class="ttdeci">$filename</div><div class="ttdef"><b>Definition:</b> <a href="actions_8php_source.html#l00010">actions.php:10</a></div></div>
<div class="ttc" id="ablock-user_8php_html_aa0f42d43ba3cb9e178b944ee55e73a7c"><div class="ttname"><a href="block-user_8php.html#aa0f42d43ba3cb9e178b944ee55e73a7c">die</a></div><div class="ttdeci">die</div><div class="ttdef"><b>Definition:</b> <a href="block-user_8php_source.html#l00027">block-user.php:27</a></div></div>
<div class="ttc" id="awebmail-compose_8php_html_aeba2ab722cedda53dbb7ec1a59f45550"><div class="ttname"><a href="webmail-compose_8php.html#aeba2ab722cedda53dbb7ec1a59f45550">$error</a></div><div class="ttdeci">$error</div><div class="ttdef"><b>Definition:</b> <a href="webmail-compose_8php_source.html#l00117">webmail-compose.php:117</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="webmail-compose_8php_source.html#l00117">$error</a>, <a class="el" href="actions_8php_source.html#l00010">$filename</a>, <a class="el" href="block-user_8php_source.html#l00027">die</a>, and <a class="el" href="db_8php_source.html#l00205">YAWK\db\query()</a>.</p>

</div>
</div>
<a id="ad4719bb30485733c458b525205cc4f25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4719bb30485733c458b525205cc4f25">&#9670;&nbsp;</a></span>more_results()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">YAWK\db::more_results </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks if there are more query results from a multi query. </p>
<dl class="section return"><dt>Returns</dt><dd>bool </dd></dl>

<p class="definition">Definition at line <a class="el" href="db_8php_source.html#l00154">154</a> of file <a class="el" href="db_8php_source.html">db.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                                      : <span class="keywordtype">bool</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        {</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            <span class="keywordflow">if</span> (method_exists($this-&gt;connection, <span class="stringliteral">&#39;more_results&#39;</span>))</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            {</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment">//                sys::setSyslog($this-&gt;connection, 53, 0, &quot;more migration results available&quot;, 0, 0, 0, 0);</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                <span class="keywordflow">return</span> $this-&gt;connection-&gt;more_results() &amp;&amp; $this-&gt;connection-&gt;next_result() &amp;&amp; $this-&gt;connection-&gt;store_result();</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;            }</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;            {</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;            }</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="db_8php_source.html#l00133">YAWK\db\next_result()</a>.</p>

</div>
</div>
<a id="a8495f225c8db2fd1dd589d8193150c01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8495f225c8db2fd1dd589d8193150c01">&#9670;&nbsp;</a></span>multi_query()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">YAWK\db::multi_query </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$query</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="db_8php_source.html#l00079">79</a> of file <a class="el" href="db_8php_source.html">db.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        {   <span class="comment">// query database</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;            <span class="keywordflow">return</span> $this-&gt;connection-&gt;multi_query($query);</div>
</div><!-- fragment -->
</div>
</div>
<a id="a7d0c04ecbe11a9f8e70830bd63ffcde9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d0c04ecbe11a9f8e70830bd63ffcde9">&#9670;&nbsp;</a></span>next_result()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">YAWK\db::next_result </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Move to next result set of a multi query. </p>
<dl class="section return"><dt>Returns</dt><dd>bool </dd></dl>

<p class="definition">Definition at line <a class="el" href="db_8php_source.html#l00133">133</a> of file <a class="el" href="db_8php_source.html">db.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        {</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;            <span class="keywordflow">if</span> (method_exists($this-&gt;connection, <span class="stringliteral">&#39;next_result&#39;</span>))</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;            {</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment">//                sys::setSyslog($this-&gt;connection, 53, 0, &quot;next result called&quot;, 0, 0, 0, 0);</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                <span class="keywordflow">return</span> $this-&gt;connection-&gt;next_result();</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;            }</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;            {</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                <span class="comment">// Free any active result sets</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                <span class="keywordflow">while</span> ($this-&gt;<a class="code" href="classYAWK_1_1db.html#ad4719bb30485733c458b525205cc4f25">more_results</a>() &amp;&amp; $this-&gt;connection-&gt;next_result()) {</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment">//                    sys::setSyslog($this-&gt;connection, 53, 0, &quot;free any active result sets&quot;, 0, 0, 0, 0);</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                }</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            }</div>
<div class="ttc" id="aclassYAWK_1_1db_html_ad4719bb30485733c458b525205cc4f25"><div class="ttname"><a href="classYAWK_1_1db.html#ad4719bb30485733c458b525205cc4f25">YAWK\db\more_results</a></div><div class="ttdeci">more_results()</div><div class="ttdoc">Checks if there are more query results from a multi query.</div><div class="ttdef"><b>Definition:</b> <a href="db_8php_source.html#l00154">db.php:154</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="db_8php_source.html#l00154">YAWK\db\more_results()</a>.</p>

</div>
</div>
<a id="a44121121304f4bdb1769dfcf342c57c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44121121304f4bdb1769dfcf342c57c8">&#9670;&nbsp;</a></span>prepare()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">YAWK\db::prepare </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$sql</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="db_8php_source.html#l00084">84</a> of file <a class="el" href="db_8php_source.html">db.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        {   <span class="comment">// prepare statement</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;            <span class="keywordflow">return</span> $this-&gt;connection-&gt;prepare(<a class="code" href="message-new_8php.html#a047170d6020a882807665812a27e2525">$sql</a>);</div>
<div class="ttc" id="amessage-new_8php_html_a047170d6020a882807665812a27e2525"><div class="ttname"><a href="message-new_8php.html#a047170d6020a882807665812a27e2525">$sql</a></div><div class="ttdeci">$sql</div><div class="ttdef"><b>Definition:</b> <a href="message-new_8php_source.html#l00032">message-new.php:32</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="message-new_8php_source.html#l00032">$sql</a>.</p>

</div>
</div>
<a id="a81da81280a387018e6f363f447c77a06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81da81280a387018e6f363f447c77a06">&#9670;&nbsp;</a></span>query()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">YAWK\db::query </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$query</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Execute any sql query. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$query</td><td>the sql query string </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>mixed The mysqli result </dd></dl>

<p class="definition">Definition at line <a class="el" href="db_8php_source.html#l00205">205</a> of file <a class="el" href="db_8php_source.html">db.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        {</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            <span class="comment">// connect to database</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;            <span class="keywordflow">if</span> ($this-&gt;connection = $this-&gt;<a class="code" href="classYAWK_1_1db.html#ac6212830d7c131c98e79ad93aee0317c">connect</a>())</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            {</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                <span class="comment">// if connection is successful</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160; </div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                <span class="comment">// replace {} in str to add table prefix</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                $query = str_replace(<span class="stringliteral">&quot;}&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, $query);</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                $query = str_replace(<span class="stringliteral">&quot;{&quot;</span>, $this-&gt;<a class="code" href="dbconfig_8php.html#aa79aa63cc5239994bcc7c408a9774d1d">config</a>[<span class="stringliteral">&#39;prefix&#39;</span>], $query);</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160; </div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                <span class="comment">// query database</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                <span class="keywordflow">return</span> $this-&gt;connection-&gt;query($query);</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            }</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                {   <span class="comment">// could not connect to database, exit with error</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                    <a class="code" href="block-user_8php.html#aa0f42d43ba3cb9e178b944ee55e73a7c">die</a> (<span class="stringliteral">&#39;Database error: &#39;</span>.mysqli_connect_error().<span class="charliteral">&#39;(&#39;</span>.mysqli_connect_errno().<span class="charliteral">&#39;)&#39;</span>);</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="dbconfig_8php_source.html#l00003">config</a>, <a class="el" href="db_8php_source.html#l00036">YAWK\db\connect()</a>, and <a class="el" href="block-user_8php_source.html#l00027">die</a>.</p>

<p class="reference">Referenced by <a class="el" href="db_8php_source.html#l00292">YAWK\db\import()</a>, and <a class="el" href="db_8php_source.html#l00230">YAWK\db\select()</a>.</p>

</div>
</div>
<a id="a31489238ce266c2bca7b84da887e6b64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31489238ce266c2bca7b84da887e6b64">&#9670;&nbsp;</a></span>quote()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">YAWK\db::quote </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Quote and escape value for use in a database query *. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$value</td><td>the value to be quoted and escaped </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>string the quoted and escaped string </dd></dl>

<p class="definition">Definition at line <a class="el" href="db_8php_source.html#l00278">278</a> of file <a class="el" href="db_8php_source.html">db.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        {</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            <span class="comment">// connect to database</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            $this-&gt;connection = $this-&gt;<a class="code" href="classYAWK_1_1db.html#ac6212830d7c131c98e79ad93aee0317c">connect</a>();</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;            <span class="comment">// escape and return string</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;            <span class="keywordflow">return</span> $this-&gt;connection-&gt;real_escape_string(<a class="code" href="widget-edit_8php.html#a0f298096f322952a72a50f98a74c7b60">$value</a>);</div>
<div class="ttc" id="awidget-edit_8php_html_a0f298096f322952a72a50f98a74c7b60"><div class="ttname"><a href="widget-edit_8php.html#a0f298096f322952a72a50f98a74c7b60">$value</a></div><div class="ttdeci">$value</div><div class="ttdef"><b>Definition:</b> <a href="widget-edit_8php_source.html#l00244">widget-edit.php:244</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="widget-edit_8php_source.html#l00244">$value</a>, and <a class="el" href="db_8php_source.html#l00036">YAWK\db\connect()</a>.</p>

</div>
</div>
<a id="a87394c8164b454fe4ac80fad73f19a91"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87394c8164b454fe4ac80fad73f19a91">&#9670;&nbsp;</a></span>real_escape_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">YAWK\db::real_escape_string </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$migrationSql</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="db_8php_source.html#l00094">94</a> of file <a class="el" href="db_8php_source.html">db.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                                                         {</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;            <span class="keywordflow">return</span> $this-&gt;connection-&gt;real_escape_string($migrationSql);</div>
</div><!-- fragment -->
</div>
</div>
<a id="a48011790184b9e7302ac84cb246cb2b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48011790184b9e7302ac84cb246cb2b1">&#9670;&nbsp;</a></span>rollback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">YAWK\db::rollback </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Rollback the current transaction</p>
<dl class="section return"><dt>Returns</dt><dd>bool true if rollback succeeded, false otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="db_8php_source.html#l00103">103</a> of file <a class="el" href="db_8php_source.html">db.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        {</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;            <span class="keywordflow">try</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;            {</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                <span class="keywordflow">while</span> ($this-&gt;connection-&gt;more_results())</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                {</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                    $this-&gt;connection-&gt;next_result();</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                }</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160; </div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                <span class="comment">// Rollback the transaction</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                <a class="code" href="email-send_8php.html#a112ef069ddc0454086e3d1e6d8d55d07">$result</a> = $this-&gt;connection-&gt;rollback();</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160; </div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="email-send_8php.html#a112ef069ddc0454086e3d1e6d8d55d07">$result</a>)</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                {   <span class="comment">// Rollback succeeded</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                }</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160; </div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            }</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;            <span class="keywordflow">catch</span> (\Exception $e)</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;            {</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                <span class="comment">// An exception was thrown, so rollback failed</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            }</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="email-send_8php_source.html#l00137">$result</a>.</p>

</div>
</div>
<a id="a8aa3eaeef683b50d4f40b8ff7a8b0e06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8aa3eaeef683b50d4f40b8ff7a8b0e06">&#9670;&nbsp;</a></span>select()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">YAWK\db::select </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$query</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fetch rows from database (SELECT query) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$query</td><td>the sql query string </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array|bool on failure </dd></dl>

<p class="definition">Definition at line <a class="el" href="db_8php_source.html#l00230">230</a> of file <a class="el" href="db_8php_source.html">db.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        {</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;            <span class="comment">// init result rows array</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;            <a class="code" href="menus_8php.html#ace2ec39e7df3899fa8df9640ec274b03">$rows</a> = array();</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            <span class="comment">// query database</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            <a class="code" href="email-send_8php.html#a112ef069ddc0454086e3d1e6d8d55d07">$result</a> = $this-&gt;<a class="code" href="classYAWK_1_1db.html#a81da81280a387018e6f363f447c77a06">query</a>($query);</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;            <span class="comment">// check if result is false</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="email-send_8php.html#a112ef069ddc0454086e3d1e6d8d55d07">$result</a> === <span class="keyword">false</span>)</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;            {</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                <span class="comment">// $error = $this-&gt;error();</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                <span class="comment">//\YAWK\sys::setSyslog($db, 5, &quot;$error&quot;, 0, 0, 0, 0);</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;            }</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;            {   <span class="comment">// fetch associative result</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                <span class="keywordflow">while</span> ($row = <a class="code" href="email-send_8php.html#a112ef069ddc0454086e3d1e6d8d55d07">$result</a>-&gt;fetch_assoc())</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                {   <span class="comment">// fill array</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                    <a class="code" href="menus_8php.html#ace2ec39e7df3899fa8df9640ec274b03">$rows</a>[] = $row;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                }</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;            }</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;            <span class="comment">// check if result rows array is set</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;            <span class="keywordflow">if</span> (isset(<a class="code" href="menus_8php.html#ace2ec39e7df3899fa8df9640ec274b03">$rows</a>) &amp;&amp; (!empty(<a class="code" href="menus_8php.html#ace2ec39e7df3899fa8df9640ec274b03">$rows</a>) &amp;&amp; (is_array(<a class="code" href="menus_8php.html#ace2ec39e7df3899fa8df9640ec274b03">$rows</a>))))</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;            {   <span class="comment">// ok, return result rows</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="menus_8php.html#ace2ec39e7df3899fa8df9640ec274b03">$rows</a>;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;            }</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                {   <span class="comment">// no result set</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                }</div>
<div class="ttc" id="amenus_8php_html_ace2ec39e7df3899fa8df9640ec274b03"><div class="ttname"><a href="menus_8php.html#ace2ec39e7df3899fa8df9640ec274b03">$rows</a></div><div class="ttdeci">$rows</div><div class="ttdef"><b>Definition:</b> <a href="menus_8php_source.html#l00126">menus.php:126</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="email-send_8php_source.html#l00137">$result</a>, <a class="el" href="menus_8php_source.html#l00126">$rows</a>, and <a class="el" href="db_8php_source.html#l00205">YAWK\db\query()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="af20b762cbadb27a59e28b5175372afa4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af20b762cbadb27a59e28b5175372afa4">&#9670;&nbsp;</a></span>$config</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">YAWK\db::$config</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$config</td><td>mysql configuration (host, username, database etc...) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="db_8php_source.html#l00019">19</a> of file <a class="el" href="db_8php_source.html">db.php</a>.</p>

</div>
</div>
<a id="a87e18404efd7485d2dc21a1f0092fc8c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87e18404efd7485d2dc21a1f0092fc8c">&#9670;&nbsp;</a></span>$connection</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">YAWK\db::$connection</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">object</td><td class="paramname">$connection</td><td>holds the mysqli database connection </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="db_8php_source.html#l00021">21</a> of file <a class="el" href="db_8php_source.html">db.php</a>.</p>

<p class="reference">Referenced by <a class="el" href="db_8php_source.html#l00036">YAWK\db\connect()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/var/www/htdocs/yawk.io/system/classes/<a class="el" href="db_8php_source.html">db.php</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceYAWK.html">YAWK</a></li><li class="navelem"><a class="el" href="classYAWK_1_1db.html">db</a></li>
    <li class="footer">Generated on Thu Mar 30 2023 22:49:33 for YaWK by <small>doxygen 1.9.1</small></li>
  </ul>
</div>
</body>
</html>
